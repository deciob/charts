{"absId":"when/timeout","url":"/home/decio/dev/personal/nightcharts-gh/bower_components/when/timeout.js","source":"/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * timeout.js\n *\n * Helper that returns a promise that rejects after a specified timeout,\n * if not explicitly resolved or rejected before that.\n *\n * @author Brian Cavalier\n * @author John Hann\n */\n\n(function(define) {\ndefine(function(require) {\n\t/*global setTimeout,clearTimeout*/\n    var when, setTimer, cancelTimer, cjsRequire, vertx;\n\n\twhen = require('./when');\n\tcjsRequire = require;\n\n\ttry {\n\t\tvertx = cjsRequire('vertx');\n\t\tsetTimer = function (f, ms) { return vertx.setTimer(ms, f); };\n\t\tcancelTimer = vertx.cancelTimer;\n\t} catch (e) {\n\t\tsetTimer = setTimeout;\n\t\tcancelTimer = clearTimeout;\n\t}\n\n    /**\n     * Returns a new promise that will automatically reject after msec if\n     * the supplied trigger doesn't resolve or reject before that.\n     *\n\t * @param {number} msec timeout in milliseconds\n     * @param {*|Promise} trigger any promise or value that should trigger the\n\t *  returned promise to resolve or reject before the msec timeout\n     * @returns {Promise} promise that will timeout after msec, or be\n\t *  equivalent to trigger if resolved/rejected before msec\n     */\n    return function timeout(msec, trigger) {\n\t\t// Support reversed, deprecated argument ordering\n\t\tif(typeof trigger === 'number') {\n\t\t\tvar tmp = trigger;\n\t\t\ttrigger = msec;\n\t\t\tmsec = tmp;\n\t\t}\n\n\t\treturn when.promise(function(resolve, reject, notify) {\n\n\t\t\tvar timeoutRef = setTimer(function onTimeout() {\n\t\t\t\treject(new Error('timed out after ' + msec + 'ms'));\n\t\t\t}, msec);\n\n\t\t\twhen(trigger,\n\t\t\t\tfunction onFulfill(value) {\n\t\t\t\t\tcancelTimer(timeoutRef);\n\t\t\t\t\tresolve(value);\n\t\t\t\t},\n\t\t\t\tfunction onReject(reason) {\n\t\t\t\t\tcancelTimer(timeoutRef);\n\t\t\t\t\treject(reason);\n\t\t\t\t},\n\t\t\t\tnotify\n\t\t\t);\n\t\t});\n    };\n});\n})(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n","modules":[{"pos":304,"count":25,"factory":true,"argList":["require"],"requires":[{"id":"./when","pos":432,"count":17}],"id":"when/timeout"}],"compileTime":"2014-03-24T21:53:07.502Z"}