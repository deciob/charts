<!DOCTYPE html>

<html>
<head>
  <title>nightcharts.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>nightcharts.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
define(<span class="string">'draw'</span>,[<span class="string">'require'</span>],<span class="function"><span class="keyword">function</span><span class="params">(require)</span> {</span>
  

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(Chart, selection, data)</span> {</span>
    <span class="keyword">if</span> (data) {
      <span class="keyword">return</span> <span class="keyword">new</span> Chart(selection.datum(data));
    }
    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
      <span class="keyword">return</span> <span class="keyword">new</span> Chart(selection.datum(data));
    }
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p><strong>The default base configuration module</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'base_config'</span>, [
  <span class="string">"d3"</span>, 
], <span class="function"><span class="keyword">function</span><span class="params">(d3)</span> {</span>
    
    <span class="keyword">return</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>layout.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      margin: {top: <span class="number">20</span>, right: <span class="number">20</span>, bottom: <span class="number">40</span>, left: <span class="number">40</span>},
      width: <span class="number">500</span>,
      height: <span class="number">400</span>,
      padding: <span class="number">.1</span>,
      vertical: <span class="literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>One of: ordinal, linear, time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      x_scale: <span class="string">'ordinal'</span>,
      y_scale: <span class="string">'linear'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>axes, apart from <code>show</code>, properties match d3&#39;s api.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      x_axis: {
        show: <span class="literal">true</span>,
        outerTickSize: <span class="number">0</span>,
        orient: <span class="string">'bottom'</span>,
        tickValues: <span class="keyword">void</span> <span class="number">0</span>,
        tickFormat: <span class="literal">null</span>,
      },
      y_axis: {
        show: <span class="literal">true</span>,
        outerTickSize: <span class="number">0</span>,
        orient: <span class="string">'left'</span>,
        tickValues: <span class="keyword">void</span> <span class="number">0</span>,
      },
      y_axis_offset: <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>if x_scale: &#39;time&#39;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      date_type: <span class="string">'string'</span>, <span class="comment">// or 'epoc'</span>
      date_format: <span class="string">'%Y'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>false or string: &#39;month&#39;, &#39;year&#39;, etc.
used for extending the timescale on the margins.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      date_offset: <span class="literal">false</span>,

      duration: <span class="number">900</span>,  <span class="comment">// transition duration</span>
      colour: <span class="string">'LightSteelBlue'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>// layout
padding: .1,
barOffSet: 4,
orientation: &#39;vertical&#39;,
// axes
x_axis: {
 outerTickSize: 0,
 orient: &#39;bottom&#39;,
 tickValues: void 0,
 tickFormat: null,
},
y_axis: {
 outerTickSize: 0,
 orient: &#39;left&#39;,
 tickValues: void 0,
},
data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      max: <span class="keyword">void</span> <span class="number">0</span>,         <span class="comment">// Max value for the linear scale</span>
      invert_data: <span class="literal">false</span>,  <span class="comment">// Data sorting</span>
      categoricalValue: <span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span> <span class="keyword">return</span> d[<span class="number">0</span>]; },
      quantativeValue: <span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span> <span class="keyword">return</span> d[<span class="number">1</span>]; },</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      handleClick: <span class="function"><span class="keyword">function</span> <span class="params">(d, i)</span> {</span> <span class="keyword">return</span> <span class="keyword">void</span> <span class="number">0</span>; },
      handleTransitionEnd: <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> <span class="keyword">void</span> <span class="number">0</span>; },</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><a href="https://github.com/Caged/d3-tip">d3-tip</a> tooltips,
can pass boolean or object with d3-tip configuration.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      tooltip: <span class="literal">false</span>,
    };
  
});</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><strong>Useful functions that can be shared across modules</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'utils/utils'</span>,[<span class="string">"d3"</span>, <span class="string">"d3_tip"</span>], <span class="function"><span class="keyword">function</span><span class="params">(d3, d3_tip)</span> {</span>
  
  <span class="function"><span class="keyword">function</span> <span class="title">clone</span> <span class="params">(obj)</span> {</span>
    <span class="keyword">if</span> (<span class="literal">null</span> == obj || <span class="string">"object"</span> != <span class="keyword">typeof</span> obj) <span class="keyword">return</span> obj;
    <span class="keyword">var</span> copy = obj.constructor();
    <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> obj) {
      <span class="keyword">if</span> (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
    }
    <span class="keyword">return</span> copy;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">extend</span> <span class="params">(target, source, use_clone)</span> {</span>
    <span class="keyword">var</span> use_clone = (<span class="keyword">typeof</span> use_clone === <span class="string">"undefined"</span>) ? <span class="literal">true</span> : use_clone,
        target_clone = use_clone ? clone(target): target;
    <span class="keyword">for</span>(prop <span class="keyword">in</span> source) {
      target_clone[prop] = source[prop];
    }
    <span class="keyword">return</span> target_clone;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">isObject</span> <span class="params">(o)</span> {</span>
    <span class="keyword">return</span> Object.prototype.toString.call(o) === <span class="string">"[object Object]"</span>;
  }

  <span class="comment">/* Adapted from Stoyan Stafanov */</span>
  <span class="function"><span class="keyword">function</span> <span class="title">schonfinkelize</span><span class="params">(fn)</span> {</span>
      <span class="keyword">var</span> slice = Array.prototype.slice,
          stored_args = slice.call(arguments, <span class="number">1</span>);
      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
          <span class="keyword">var</span> new_args = slice.call(arguments),
              args = stored_args.concat(new_args);
          <span class="keyword">return</span> fn.apply(<span class="literal">null</span>, args);
      };
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>For each attribute in <code>state</code> it sets a getter-setter function 
on <code>obj</code>.
Accepts one level nested <code>state</code> objects.
TODO: make this function less convoluted.</p>
<p>obj - object or function
state - object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">getset</span> <span class="params">(obj, state)</span> {</span>
    d3.entries(state).forEach(<span class="function"><span class="keyword">function</span><span class="params">(o)</span> {</span>
      obj[o.key] = <span class="function"><span class="keyword">function</span> <span class="params">(x)</span> {</span>
        <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> state[o.key];
        <span class="keyword">var</span> old = state[o.key];
        state[o.key] = x;
        <span class="keyword">if</span> ( isObject(o.value) ) {
          d3.keys(o.value).forEach(<span class="function"><span class="keyword">function</span><span class="params">(key)</span> {</span>
            state[o.key][key] = <span class="keyword">typeof</span> x[key] !== <span class="string">'undefined'</span> ? x[key] : o.value[key];
          });
        }
        <span class="keyword">return</span> obj;
      }
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Fires a callback when all transitions of a chart have ended.
The solution is inspired from a reply in 
<a href="https://groups.google.com/forum/#!msg/d3-js/WC_7Xi6VV50/j1HK0vIWI-EJ">Single event at end of transition?</a>. 
The original suggestion assumes the data length never changes, this 
instead also accounts for <code>exits</code> during the transition.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">endall</span> <span class="params">(elements_in_transition, data, callback)</span> {</span>
    <span class="keyword">var</span> n = data.length;
    elements_in_transition 
      .each(<span class="string">"end"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span> 
        <span class="keyword">if</span> (!--n) {
          callback.apply(<span class="keyword">this</span>, arguments);
        }
      });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Initializes a <a href="https://github.com/Caged/d3-tip">d3-tip</a> tooltip.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">tip</span> <span class="params">(obj)</span> {</span>
    <span class="keyword">var</span> tip = d3_tip()
      .attr(<span class="string">'class'</span>, <span class="string">'d3-tip'</span>)
      .html(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d; });
    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">'boolean'</span>) {
      Object.keys(obj).forEach(<span class="function"><span class="keyword">function</span><span class="params">(key)</span> {</span>
        <span class="keyword">var</span> value = obj[key];
        <span class="keyword">if</span> (key === <span class="string">'attr'</span>) {
          tip.attr(value[<span class="number">0</span>], value[<span class="number">1</span>]);
        } <span class="keyword">else</span> {
          tip[key](value);
        }  
      });
    }
    <span class="keyword">return</span> tip;
  }

  <span class="keyword">return</span> {
    extend: extend,
    getset: getset,
    isObject: isObject,
    schonfinkelize: schonfinkelize,
    endall: endall,
    tip: tip,
  };

});


define(<span class="string">'mixins/data_methods'</span>, [
  <span class="string">"d3"</span>, 
  <span class="string">"utils/utils"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3, utils)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">dataIdentifier</span> <span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d[<span class="number">0</span>];
  }

  <span class="function"><span class="keyword">function</span> <span class="title">delay</span> <span class="params">(__)</span> {</span>
    <span class="keyword">var</span> duration = __.duration,
        data = __.data;
    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(d, i)</span> {</span>
      <span class="keyword">return</span> i / data[<span class="number">0</span>].length * duration;
    }
  };

  <span class="function"><span class="keyword">function</span> <span class="title">normalizeData</span> <span class="params">(data, __)</span> {</span>
    <span class="keyword">var</span> parsed_data = [],
        date_chart = __.x_scale == <span class="string">'time'</span> ? <span class="literal">true</span> : <span class="literal">false</span>,
        date_format = __.date_format,
        date_type = __.date_type,
        categoricalValue = __.categoricalValue;
    data.forEach( <span class="function"><span class="keyword">function</span> <span class="params">(dataset, index)</span> {</span>
      parsed_data.push(dataset.map(<span class="function"><span class="keyword">function</span><span class="params">(d, i)</span> {</span>
        <span class="keyword">var</span> x;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>The time data is encoded in a string:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (date_chart &amp;&amp; date_type == <span class="string">'string'</span>) {
          x = d3.time.format(date_format)
            .parse(categoricalValue.call(dataset, d));</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>The time data is encoded in an epoch number:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> <span class="keyword">if</span> (date_chart &amp;&amp; __.date_type == <span class="string">'epoch'</span>) {
          x = <span class="keyword">new</span> Date(categoricalValue.call(dataset, d) * <span class="number">1000</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Real categorical value:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> {
          x = __.categoricalValue.call(dataset, d);
        }
        <span class="keyword">return</span> [x, __.quantativeValue.call(dataset, d)];
      }));
    });
    <span class="keyword">if</span> (__.invert_data) {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>parsed_data = data.reverse();  // TODO</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    }
    <span class="keyword">return</span> parsed_data;
  }


  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.dataIdentifier = dataIdentifier;
    <span class="keyword">this</span>.delay = delay;
    <span class="keyword">this</span>.normalizeData = normalizeData;</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>this.transitionXAxis = transitionXAxis;
this.transitionYAxis = transitionYAxis;
this.setYScale = setYScale;
this.setXScale = setXScale;
this.setXAxis = setXAxis;
this.setYAxis = setYAxis;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});
define(<span class="string">'mixins/layout_methods'</span>, [
  <span class="string">"d3"</span>, 
  <span class="string">"utils/utils"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3, utils)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">w</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> __ = <span class="keyword">this</span>.__;
    <span class="keyword">return</span> __.width - __.margin.right - __.margin.left; 
  };
      
  <span class="function"><span class="keyword">function</span> <span class="title">h</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> __ = <span class="keyword">this</span>.__;
    <span class="keyword">return</span> __.height - __.margin.top - __.margin.bottom; 
  };

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.w = w;
    <span class="keyword">this</span>.h = h;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});
define(<span class="string">'mixins/scale_methods'</span>, [
  <span class="string">"d3"</span>, 
  <span class="string">"utils/utils"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3, utils)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">_getRange</span> <span class="params">(axis, __)</span> {</span>
    <span class="keyword">var</span> vertical = __.vertical;
    <span class="keyword">if</span> ( axis == <span class="string">'x'</span>) {
      <span class="keyword">return</span> [<span class="number">0</span>, __.w];
    } <span class="keyword">else</span> <span class="keyword">if</span> ( axis == <span class="string">'y'</span> &amp;&amp; vertical ) {
      <span class="keyword">return</span> [__.h, <span class="number">0</span>];
    } <span class="keyword">else</span> <span class="keyword">if</span> ( axis == <span class="string">'y'</span> &amp;&amp; !vertical ) {
      <span class="keyword">return</span> [<span class="number">0</span>, __.w];
    }
  }

  <span class="function"><span class="keyword">function</span> <span class="title">setScale</span> <span class="params">(scale_type)</span> {</span>
    <span class="keyword">switch</span> (scale_type) {
      <span class="keyword">case</span> <span class="literal">undefined</span>:
        <span class="keyword">return</span>;
      <span class="keyword">case</span> <span class="string">'ordinal'</span>:
        <span class="keyword">return</span> d3.scale.ordinal;
      <span class="keyword">case</span> <span class="string">'linear'</span>:
        <span class="keyword">return</span> d3.scale.linear;
      <span class="keyword">case</span> <span class="string">'time'</span>:
        <span class="keyword">return</span> d3.time.scale;
      <span class="keyword">default</span>:
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'scale_type `'</span>
          + scale_type
          + <span class="string">'` is not supported. Supported types are: ordinal, linear, time'</span> );
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Sets the range and domain for the linear scale.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_applyLinearScale</span> <span class="params">(range, __)</span> {</span>
    <span class="keyword">var</span> max;
    <span class="keyword">if</span> (__.max) {
      max = __.max;
    } <span class="keyword">else</span> {
      max = d3.max( __.data, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> parseFloat(d[<span class="number">1</span>]); } );
    }
    <span class="keyword">return</span> <span class="keyword">this</span>.range(range).domain([<span class="number">0</span>, max]);
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_applyTimeScale</span> <span class="params">(range, __)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>see <a href="http://bl.ocks.org/mbostock/6186172">bl.ocks.org/mbostock/6186172</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> data = __.x_axis_data || __.data,  <span class="comment">// FIXME this hack!</span>
        t1 = data[<span class="number">0</span>][<span class="number">0</span>],
        t2 = data[data.length - <span class="number">1</span>][<span class="number">0</span>],
        offset = __.date_offset,
        t0,
        t3;
    <span class="keyword">if</span> (__.date_offset) {
      t0 = d3.time[offset].offset(t1, -<span class="number">1</span>);
      t3 = d3.time[offset].offset(t2, +<span class="number">1</span>);
      <span class="keyword">return</span> <span class="keyword">this</span>
        .domain([t0, t3])
        .range([t0, t3].map(d3.time.scale()
          .domain([t1, t2])
          .range([<span class="number">0</span>, __.w()])));
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="keyword">this</span>.range(range).domain([data[<span class="number">0</span>][<span class="number">0</span>], data[data.length - <span class="number">1</span>][<span class="number">0</span>]]);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Sets the range and domain for the ordinal scale.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_applyOrdinalScale</span> <span class="params">(range, __)</span> {</span>
    <span class="keyword">var</span> data = __.x_axis_data || __.data;  <span class="comment">// FIXME this hack!</span>
    <span class="keyword">return</span> <span class="keyword">this</span>
      .rangeRoundBands(range, __.padding)
      .domain( __.data[<span class="number">0</span>].map( <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d[<span class="number">0</span>]; } ) );
  }

  <span class="function"><span class="keyword">function</span> <span class="title">applyScale</span> <span class="params">(axis, scale_type, __)</span> {</span>
    <span class="keyword">var</span> range = _getRange(axis, __);
    <span class="keyword">switch</span> (scale_type) {
      <span class="keyword">case</span> <span class="string">'ordinal'</span>:
        <span class="keyword">return</span> _applyOrdinalScale.call(<span class="keyword">this</span>, range, __);
      <span class="keyword">case</span> <span class="string">'linear'</span>:
        <span class="keyword">return</span> _applyLinearScale.call(<span class="keyword">this</span>, range, __);
      <span class="keyword">case</span> <span class="string">'time'</span>:
        <span class="keyword">return</span> _applyTimeScale.call(<span class="keyword">this</span>, range, __);
      <span class="keyword">case</span> <span class="literal">undefined</span>:
        <span class="keyword">return</span> <span class="keyword">new</span> Error(<span class="string">'scale cannot be undefined'</span>);
      <span class="keyword">default</span>:
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'scale_type '</span> 
                         + scale_type 
                         + <span class="string">' not supported. Is it misspelled?'</span> );
    }
  }

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.setScale = setScale;
    <span class="keyword">this</span>.setScales = setScale;
    <span class="keyword">this</span>.applyScale = applyScale;
    <span class="keyword">this</span>.applyScales = applyScale;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});


define(<span class="string">'mixins/axis_methods'</span>, [
  <span class="string">"d3"</span>, 
  <span class="string">"utils/utils"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3, utils)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">setAxisProps</span> <span class="params">(axis_conf, scale)</span> {</span>
    <span class="keyword">if</span> ( !axis_conf.show ) { <span class="keyword">return</span>; }
    <span class="keyword">var</span> axis = d3.svg.axis().scale(scale);
    d3.entries(axis_conf).forEach(<span class="function"><span class="keyword">function</span><span class="params">(o)</span> {</span>
      <span class="keyword">if</span> ( o.value !== <span class="literal">undefined</span> &amp;&amp; o.key !== <span class="string">'show'</span> ) {
        axis[o.key](o.value);
      }
    });
    <span class="keyword">return</span> axis;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionXAxisV</span> <span class="params">(__)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">this</span>
      .attr(<span class="string">"transform"</span>, <span class="string">"translate(0,"</span> + __.yScale.range()[<span class="number">0</span>] + <span class="string">")"</span>)
      .call(__.xAxis);
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionXAxisH</span> <span class="params">(__)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">this</span>.attr(<span class="string">"transform"</span>, <span class="string">"translate("</span> + __.barOffSet
      + <span class="string">","</span> + __.h + <span class="string">")"</span>).call(__.xAxis);
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionXAxis</span> <span class="params">(__)</span> {</span>
    <span class="keyword">if</span> ( !__.x_axis.show ) { <span class="keyword">return</span>; }
    <span class="keyword">var</span> vertical = __.vertical;
    <span class="keyword">if</span> (vertical == <span class="literal">true</span>) {
      <span class="keyword">return</span> _transitionXAxisV.call(<span class="keyword">this</span>, __);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> _transitionXAxisH.call(<span class="keyword">this</span>, __);
    }  
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionYAxis</span> <span class="params">(__)</span> {</span>
    <span class="keyword">if</span> ( !__.y_axis.show ) { <span class="keyword">return</span>; }
    <span class="keyword">return</span> <span class="keyword">this</span>.call(__.yAxis)
      .selectAll(<span class="string">"g"</span>)
      .delay( __.delay(__) );
  }

  <span class="function"><span class="keyword">function</span> <span class="title">transitionAxis</span> <span class="params">(axis, __)</span> {</span>
    <span class="keyword">switch</span> (axis) {
      <span class="keyword">case</span> <span class="string">'x'</span>:
        <span class="keyword">return</span> _transitionXAxis.call(<span class="keyword">this</span>, __);
      <span class="keyword">case</span> <span class="string">'y'</span>:
        <span class="keyword">return</span> _transitionYAxis.call(<span class="keyword">this</span>, __);
      <span class="keyword">default</span>:
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'axis must be one of: x, y. Not '</span> + axis );
    } 
  } 

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.setAxisProps = setAxisProps;
    <span class="keyword">this</span>.transitionAxis = transitionAxis;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});


define(<span class="string">'mixins/scaffolding'</span>, [
  <span class="string">"d3"</span>, 
  <span class="string">"utils/utils"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3, utils)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">axisScaffolding</span> <span class="params">(data, __)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Scales are functions that map from an input domain to an output range.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.xScale = <span class="keyword">this</span>.setScale(__.x_scale)();
    <span class="keyword">this</span>.yScale = <span class="keyword">this</span>.setScale(__.y_scale)();</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Axes, see: <a href="https://github.com/mbostock/d3/wiki/SVG-Axes">SVG-Axes</a>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.xAxis = <span class="keyword">this</span>.setAxisProps(__.x_axis, <span class="keyword">this</span>.xScale);
    <span class="keyword">this</span>.yAxis = <span class="keyword">this</span>.setAxisProps(__.y_axis, <span class="keyword">this</span>.yScale);

    utils.extend(
      <span class="keyword">this</span>.__, 
      {
        data: data,</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>x_axis_data: data[0], // FIXME this hack!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        yScale: <span class="keyword">this</span>.yScale,
        xScale: <span class="keyword">this</span>.xScale,
        xAxis: <span class="keyword">this</span>.xAxis,
        yAxis: <span class="keyword">this</span>.yAxis,
        delay: <span class="keyword">this</span>.delay,
        w: <span class="keyword">this</span>.w(),
        h: <span class="keyword">this</span>.h(),
      }, 
      <span class="literal">false</span>
    );

    <span class="keyword">this</span>.applyScale.call( <span class="keyword">this</span>.xScale, <span class="string">'x'</span>, __.x_scale, __ );
    <span class="keyword">this</span>.applyScale.call( <span class="keyword">this</span>.yScale, <span class="string">'y'</span>, __.y_scale, __ );

    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">chartScaffolding</span> <span class="params">(selection, __, chart_class)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Select the svg element, if it exists.
this.gWrapper = selection.selectAll(&quot;g.&quot; + chart_class + &#39;_wrapper&#39;)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.svg = selection.selectAll(<span class="string">"svg"</span>).data([<span class="keyword">this</span>.data]);</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Otherwise, create the skeletal chart.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.gEnter = <span class="keyword">this</span>.svg.enter().append(<span class="string">"svg"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>.attr(&#39;class&#39;, chart_class + &#39;_wrapper&#39;)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      .append(<span class="string">"g"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Initializing the tooltip.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> ( __.tooltip ) {
      <span class="keyword">this</span>.tip = utils.tip( __.tooltip );
      <span class="keyword">this</span>.gEnter.call(<span class="keyword">this</span>.tip);
    }

    <span class="keyword">this</span>.gEnter.append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, chart_class);
    <span class="keyword">this</span>.gEnter.append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, <span class="string">"x axis"</span>);
    <span class="keyword">this</span>.gEnter.append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, <span class="string">"y axis"</span>)
     .attr(<span class="string">"transform"</span>, <span class="string">"translate(-"</span> + (__.y_axis_offset) + <span class="string">",0)"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Update the outer dimensions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.svg.attr(<span class="string">"width"</span>, __.width)
      .attr(<span class="string">"height"</span>, __.height);</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Update the inner dimensions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.g = <span class="keyword">this</span>.svg.select(<span class="string">"g"</span>)
      .attr(<span class="string">"transform"</span>, <span class="string">"translate("</span> + 
      __.margin.left + <span class="string">","</span> + __.margin.top + <span class="string">")"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Transitions root.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.transition = <span class="keyword">this</span>.g.transition().duration(__.duration);</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Update the y axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.transitionAxis.call(
      <span class="keyword">this</span>.transition.selectAll(<span class="string">'.y.axis'</span>), <span class="string">'y'</span>, __);</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Update the x axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.transitionAxis.call(
      <span class="keyword">this</span>.transition.selectAll(<span class="string">'.x.axis'</span>), <span class="string">'x'</span>, __);

    <span class="keyword">return</span> <span class="keyword">this</span>
  };
      
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.axisScaffolding = axisScaffolding;
    <span class="keyword">this</span>.chartScaffolding = chartScaffolding;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p><strong>The default configuration module for the line.line module</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'line/config'</span>,[
  <span class="string">"d3"</span>, 
  <span class="string">"base_config"</span>,
  <span class="string">"utils/utils"</span>,
], <span class="function"><span class="keyword">function</span><span class="params">(d3, base_config, utils)</span> {</span>
    
  <span class="keyword">var</span> config = {
    x_scale: <span class="string">'time'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>TODO this is an yAxis offset....
date_adjust: 5</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  };

  <span class="keyword">return</span> utils.extend(base_config, config);
  
});</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p><strong>The line.line module</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'line/line'</span>,[
    <span class="string">"d3"</span>, 
    <span class="string">"utils/utils"</span>,
    <span class="string">"line/config"</span>, 
    <span class="string">"mixins/data_methods"</span>,
    <span class="string">"mixins/layout_methods"</span>,
    <span class="string">"mixins/scale_methods"</span>,
    <span class="string">"mixins/axis_methods"</span>,
    <span class="string">"mixins/scaffolding"</span>,
  ], <span class="function"><span class="keyword">function</span><span class="params">(d3, utils, default_config, data_methods, layout_methods, scale_methods, axis_methods, scaffolding)</span> {</span>
  
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(user_config)</span> {</span>

    <span class="keyword">var</span> config = user_config || {},
        __ = utils.extend(default_config, config);

    <span class="function"><span class="keyword">function</span> <span class="title">Line</span> <span class="params">(selection)</span> {</span>

      <span class="keyword">var</span> self = <span class="keyword">this</span> <span class="keyword">instanceof</span> Line
               ? <span class="keyword">this</span>
               : <span class="keyword">new</span> Line(selection),
          data = self.normalizeData(selection.datum(), __),
          lines;

      self.__ = __;
      __.x_axis_data = data[<span class="number">0</span>]; <span class="comment">//FIXME</span>

      self.axisScaffolding.call(self, data, __);
      self.chartScaffolding.call(self, selection, __, <span class="string">'lines'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Select the line elements, if they exists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      lines = self.g.selectAll(<span class="string">".line"</span>)
        .data(data, self.dataIdentifier);</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Exit phase (let us push out old lines before the new ones come in).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      lines.exit()
        .transition().duration(__.duration).style(<span class="string">'opacity'</span>, <span class="number">0</span>).remove();</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Otherwise, create them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      lines.enter().append(<span class="string">"path"</span>)
        .attr(<span class="string">"class"</span>, <span class="string">"line"</span>)
        .attr(<span class="string">"d"</span>, self.line(__) )
        .on(<span class="string">'click'</span>, __.handleClick);</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>TODO: FIXME</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (__.tooltip) {
        lines
         .on(<span class="string">'mouseover'</span>, self.tip.show)
         .on(<span class="string">'mouseout'</span>, self.tip.hide);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>TODO
And transition them.
self.transitionLines
 .call(transition.selectAll(&#39;.line&#39;), &#39;vertical&#39;, params)
 .call(utils.endall, data, __.handleTransitionEnd);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> selection;

    }

    utils.getset(Line, __);
    data_methods.call(Line.prototype);
    layout_methods.call(Line.prototype);
    scale_methods.call(Line.prototype);
    axis_methods.call(Line.prototype);
    scaffolding.call(Line.prototype);

    Line.prototype.line = <span class="function"><span class="keyword">function</span> <span class="params">(__)</span> {</span>
      <span class="keyword">return</span> d3.svg.line().x(<span class="function"><span class="keyword">function</span><span class="params">(d, i)</span> {</span>
        <span class="keyword">return</span> __.xScale(d[<span class="number">0</span>]);
      }).y(<span class="function"><span class="keyword">function</span><span class="params">(d, i)</span> {</span>
        <span class="keyword">return</span> __.yScale(d[<span class="number">1</span>]);
      });
    }

    <span class="keyword">return</span> Line;

  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p><strong>The default configuration module for the point.point module</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'circle/config'</span>, [
  <span class="string">"d3"</span>, 
  <span class="string">"base_config"</span>,
  <span class="string">"utils/utils"</span>,
], <span class="function"><span class="keyword">function</span><span class="params">(d3, base_config, utils)</span> {</span>
    
  <span class="keyword">var</span> config = {</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>x_scale: &#39;time&#39;,
TODO this is an yAxis offset....
date_adjust: 5</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  };

  <span class="keyword">return</span> utils.extend(base_config, config);
  
});</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p><strong>The circle.circle module</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'circle/circle'</span>,[
    <span class="string">"d3"</span>, 
    <span class="string">"utils/utils"</span>,
    <span class="string">"circle/config"</span>, 
    <span class="string">"mixins/data_methods"</span>,
    <span class="string">"mixins/layout_methods"</span>,
    <span class="string">"mixins/scale_methods"</span>,
    <span class="string">"mixins/axis_methods"</span>,
    <span class="string">"mixins/scaffolding"</span>,
  ], <span class="function"><span class="keyword">function</span><span class="params">(d3, utils, default_config, data_methods, layout_methods, scale_methods, axis_methods, scaffolding)</span> {</span>
  
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(user_config)</span> {</span>

    <span class="keyword">var</span> config = user_config || {},
        __ = utils.extend(default_config, config);

    <span class="function"><span class="keyword">function</span> <span class="title">Circle</span> <span class="params">(selection)</span> {</span>

      <span class="keyword">var</span> self = <span class="keyword">this</span> <span class="keyword">instanceof</span> Circle
               ? <span class="keyword">this</span>
               : <span class="keyword">new</span> Circle(selection),
          data = self.normalizeData(selection.datum(), __),  <span class="comment">//TODO</span>
          circles;

      self.__ = __;

      self.axisScaffolding.call(self, data, __);
      self.chartScaffolding.call(self, selection, __, <span class="string">'circles'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Select the circle elements, if they exists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      circles = self.g.selectAll(<span class="string">".circle"</span>)
        .data(data[<span class="number">0</span>], self.dataIdentifier);</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Exit phase (let us push out old circles before the new ones come in).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      circles.exit()
        .transition().duration(__.duration).style(<span class="string">'opacity'</span>, <span class="number">0</span>).remove();</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Otherwise, create them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      circles.enter().append(<span class="string">"circle"</span>)
        .attr(<span class="string">"class"</span>, <span class="string">"dot"</span>)
        .attr(<span class="string">"r"</span>, <span class="number">3.5</span>)
        .attr(<span class="string">"cx"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> 
          console.log(d);
          __.xScale(d[<span class="number">0</span>]); })
        .attr(<span class="string">"cy"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> __.yScale(d[<span class="number">1</span>]); })
        .style(<span class="string">"fill"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> <span class="string">'#1D2948'</span>; })
        .on(<span class="string">'click'</span>, __.handleClick);</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>TODO: FIXME</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> (__.tooltip) {
        circles
         .on(<span class="string">'mouseover'</span>, self.tip.show)
         .on(<span class="string">'mouseout'</span>, self.tip.hide);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>TODO
And transition them.
self.transitionCircles
 .call(transition.selectAll(&#39;.circle&#39;), &#39;vertical&#39;, params)
 .call(utils.endall, data, __.handleTransitionEnd);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> selection;

    }

    utils.getset(Circle, __);
    data_methods.call(Circle.prototype);
    layout_methods.call(Circle.prototype);
    scale_methods.call(Circle.prototype);
    axis_methods.call(Circle.prototype);
    scaffolding.call(Circle.prototype);

    <span class="keyword">return</span> Circle;

  }

});


define(<span class="string">'chart'</span>,[
  <span class="string">"draw"</span>,
  <span class="string">"base_config"</span>,
  <span class="string">"utils/utils"</span>,
  <span class="string">"mixins/data_methods"</span>,
  <span class="string">"mixins/layout_methods"</span>,
  <span class="string">"mixins/scale_methods"</span>,
  <span class="string">"mixins/axis_methods"</span>,
  <span class="string">"mixins/scaffolding"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>&quot;bar/config&quot;, 
&quot;bar/bar&quot;,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="string">"line/config"</span>,
  <span class="string">"line/line"</span>,
  <span class="string">"circle/config"</span>,
  <span class="string">"circle/circle"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>&quot;frame/states&quot;,
&quot;frame/state_machine&quot;,
&quot;frame/frame&quot;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>], <span class="function"><span class="keyword">function</span><span class="params">(
  draw, 
  base_config, 
  utils, 
  data_methods, 
  layout_methods, 
  scale_methods,
  axis_methods,
  scaffolding,</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>bar_config, 
Bar, </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  line_config, 
  Line,
  circle_config,
  Circle</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>states, 
StateMachine, 
Frame</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>) {

  <span class="keyword">return</span> {
    draw: draw,
    base_config: base_config,
    utils: utils,
    data_methods: data_methods,
    layout_methods: layout_methods,
    scale_methods: scale_methods,
    axis_methods: axis_methods,
    scaffolding: scaffolding,</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>bar_config: bar_config,
Bar: Bar,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    line_config: line_config,
    Line: Line,
    circle_config: circle_config,
    Circle: Circle,</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Frame: Frame,
states: states, 
StateMachine: StateMachine,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  };

});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
