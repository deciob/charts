<!DOCTYPE html>

<html>
<head>
  <title>nightcharts.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>nightcharts.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
define(<span class="string">'draw'</span>,[<span class="string">'require'</span>],<span class="function"><span class="keyword">function</span><span class="params">(require)</span> {</span>
  

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(Chart, selection, data)</span> {</span>
    <span class="keyword">if</span> (data) {
      <span class="keyword">return</span> <span class="keyword">new</span> Chart(selection.datum(data));
    }
    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
      <span class="keyword">return</span> <span class="keyword">new</span> Chart(selection.datum(data));
    }
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p><strong>The default base configuration module</strong></p>
<p>Data structures:</p>
<p>bar:
data = [ [ [], [], [], ... [] ], ... ]
svg.data( [data] )</p>
<p>line:
data = [ [ [], [], [], ... [] ], ... ]
svg.data( [data] )
__.x_axis_data = data[0]  #FIXME</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'base_config'</span>, [
  <span class="string">"d3"</span>, 
], <span class="function"><span class="keyword">function</span><span class="params">(d3)</span> {</span>
    
    <span class="keyword">return</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>layout.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      margin: {top: <span class="number">20</span>, right: <span class="number">20</span>, bottom: <span class="number">40</span>, left: <span class="number">40</span>},
      width: <span class="keyword">void</span> <span class="number">0</span>,
      height: <span class="keyword">void</span> <span class="number">0</span>, <span class="comment">// if set, height has precedence on ratio</span>
      ratio: <span class="number">.4</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>vertical: true,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      quantitative_scale: <span class="string">'y'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>One of: ordinal, linear, time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      x_scale: <span class="string">'ordinal'</span>,
      y_scale: <span class="string">'linear'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Forces the quantitative scale bounds:
false    -&gt;  min: 0, max: data_max
true     -&gt;  min: data_min, max: data_max
obj      -&gt;  min: obj.min, max: obj.max</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      scale_bounds: <span class="string">'0,max'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>axes, apart from <code>show</code>, properties match d3&#39;s api.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      x_axis: {
        show: <span class="literal">true</span>,
        outerTickSize: <span class="number">0</span>,
        orient: <span class="string">'bottom'</span>,
        tickValues: <span class="keyword">void</span> <span class="number">0</span>,
        tickFormat: <span class="literal">null</span>,
      },
      y_axis: {
        show: <span class="literal">true</span>,
        outerTickSize: <span class="number">0</span>,
        orient: <span class="string">'left'</span>,
        tickValues: <span class="keyword">void</span> <span class="number">0</span>,
      },
      y_axis_offset: <span class="number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <pre><code> // if x_scale: &#39;time&#39;
 date_type: &#39;string&#39;, // or &#39;epoc&#39;
 date_format: &#39;%Y&#39;,
 // false or string: &#39;month&#39;, &#39;year&#39;, etc.
 // used for extending the timescale on the margins.
 date_offset: false,</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>      duration: <span class="number">900</span>,  <span class="comment">// transition duration</span></pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <pre><code> colour: &#39;LightSteelBlue&#39;,
 // data
 max: void 0,         // Max value for the linear scale
 invert_data: false,  // Data sorting</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>      categoricalValue: <span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span> <span class="keyword">return</span> d[<span class="number">0</span>]; },
      quantativeValue: <span class="function"><span class="keyword">function</span> <span class="params">(d)</span> {</span> <span class="keyword">return</span> d[<span class="number">1</span>]; },</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>events
     handleClick: function (d, i) { return void 0; },
     handleTransitionEnd: function(d) { return void 0; },
     // <a href="https://github.com/Caged/d3-tip">d3-tip</a> tooltips,
     // can pass boolean or object with d3-tip configuration.
     tooltip: false,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      overlapping_charts: { names: [] }
    };
  
});</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><strong>Useful functions that can be shared across modules</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'utils/mixins'</span>,[<span class="string">"d3"</span>, <span class="string">"d3_tip"</span>], <span class="function"><span class="keyword">function</span><span class="params">(d3, d3_tip)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">clone</span> <span class="params">(obj)</span> {</span>
    <span class="keyword">if</span> (<span class="literal">null</span> == obj || <span class="string">"object"</span> != <span class="keyword">typeof</span> obj) <span class="keyword">return</span> obj;
    <span class="keyword">var</span> copy = obj.constructor();
    <span class="keyword">for</span> (<span class="keyword">var</span> attr <span class="keyword">in</span> obj) {
      <span class="keyword">if</span> (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
    }
    <span class="keyword">return</span> copy;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">extend</span> <span class="params">(target, source, clone_target, not_override)</span> {</span>
    <span class="keyword">var</span> clone_target = (<span class="keyword">typeof</span> clone === <span class="string">"undefined"</span>) ? <span class="literal">true</span> : clone,
        target_c = clone_target ? clone(target): target;
    <span class="keyword">for</span>(prop <span class="keyword">in</span> source) {
      <span class="keyword">if</span> (not_override) {
        target_c[prop] = target_c[prop] ? target_c[prop] : source[prop];
      } <span class="keyword">else</span> {
        target_c[prop] = source[prop];
      }
    }
    <span class="keyword">return</span> target_c;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">isObject</span> <span class="params">(o)</span> {</span>
    <span class="keyword">return</span> Object.prototype.toString.call(o) === <span class="string">"[object Object]"</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>For each attribute in <code>state</code> it sets a getter-setter function 
on <code>obj</code>.
Accepts one level nested <code>state</code> objects.
TODO: make this function less convoluted.</p>
<p>obj - object or function
state - object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">getset</span> <span class="params">(obj, state)</span> {</span>
    d3.entries(state).forEach(<span class="function"><span class="keyword">function</span><span class="params">(o)</span> {</span>
      obj[o.key] = <span class="function"><span class="keyword">function</span> <span class="params">(x)</span> {</span>
        <span class="keyword">if</span> (!arguments.length) <span class="keyword">return</span> state[o.key];
        <span class="keyword">var</span> old = state[o.key];
        state[o.key] = x;
        <span class="keyword">if</span> ( isObject(o.value) ) {
          d3.keys(o.value).forEach(<span class="function"><span class="keyword">function</span><span class="params">(key)</span> {</span>
            state[o.key][key] = <span class="keyword">typeof</span> x[key] !== <span class="string">'undefined'</span> ? x[key] : o.value[key];
          });
        }
        <span class="keyword">return</span> obj;
      }
    });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Fires a callback when all transitions of a chart have ended.
The solution is inspired from a reply in 
<a href="https://groups.google.com/forum/#!msg/d3-js/WC_7Xi6VV50/j1HK0vIWI-EJ">Single event at end of transition?</a>. 
The original suggestion assumes the data length never changes, this 
instead also accounts for <code>exits</code> during the transition.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">endall</span> <span class="params">(elements_in_transition, data, callback)</span> {</span>
    <span class="keyword">var</span> n = data.length;
    elements_in_transition 
      .each(<span class="string">"end"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span> 
        <span class="keyword">if</span> (!--n) {
          callback.apply(<span class="keyword">this</span>, arguments);
        }
      });
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Initializes a <a href="https://github.com/Caged/d3-tip">d3-tip</a> tooltip.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">tip</span> <span class="params">(obj)</span> {</span>
    <span class="keyword">var</span> tip = d3_tip()
      .attr(<span class="string">'class'</span>, <span class="string">'d3-tip'</span>)
      .html(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d; });
    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">'boolean'</span>) {
      Object.keys(obj).forEach(<span class="function"><span class="keyword">function</span><span class="params">(key)</span> {</span>
        <span class="keyword">var</span> value = obj[key];
        <span class="keyword">if</span> (key === <span class="string">'attr'</span>) {
          tip.attr(value[<span class="number">0</span>], value[<span class="number">1</span>]);
        } <span class="keyword">else</span> {
          tip[key](value);
        }  
      });
    }
    <span class="keyword">return</span> tip;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">getScaffoldingMethod</span> <span class="params">(chart_name)</span> {</span>
    <span class="keyword">var</span> name = chart_name.substring(<span class="number">0</span>, chart_name.length - <span class="number">1</span>);
    <span class="keyword">return</span> <span class="keyword">this</span>[name+<span class="string">'Scaffolding'</span>];
  }

  <span class="function"><span class="keyword">function</span> <span class="title">getMinMaxValues</span> <span class="params">(data)</span> {</span>
    <span class="keyword">var</span> min = <span class="literal">Infinity</span>,
        max = <span class="number">0</span>;
    data.forEach( <span class="function"><span class="keyword">function</span> <span class="params">(data, i)</span> {</span>
      <span class="keyword">var</span> min_p = d3.min( data, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> parseFloat(d[<span class="number">1</span>]); } ),
          max_p = d3.max( data, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> parseFloat(d[<span class="number">1</span>]); } );
      min = min_p &lt; min ? min_p : min;
      max = max_p &gt; max ? max_p : max;
    });
    <span class="keyword">return</span> {min: min, max: max};
  }

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.clone = clone;
    <span class="keyword">this</span>.extend = extend;
    <span class="keyword">this</span>.isObject = isObject;
    <span class="keyword">this</span>.getset = getset;
    <span class="keyword">this</span>.endall = endall;
    <span class="keyword">this</span>.tip = tip;
    <span class="keyword">this</span>.getScaffoldingMethod = getScaffoldingMethod;
    <span class="keyword">this</span>.getMinMaxValues = getMinMaxValues;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});
define(<span class="string">'mixins/data'</span>, [
  <span class="string">"d3"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">dataIdentifier</span> <span class="params">(d)</span> {</span>
    <span class="keyword">return</span> d[<span class="number">0</span>];
  }

  <span class="function"><span class="keyword">function</span> <span class="title">delay</span> <span class="params">(__)</span> {</span>
    <span class="keyword">var</span> duration = __.duration,
        data = __.data;
    <span class="keyword">if</span> (duration == <span class="literal">undefined</span>) { <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'__.duration unset'</span>)}
    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(d, i)</span> {</span>
      <span class="keyword">return</span> i / data[<span class="number">0</span>].length * duration;
    }
  };

  <span class="function"><span class="keyword">function</span> <span class="title">normalizeData</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> data = <span class="keyword">this</span>.selection.datum(),
        __ = <span class="keyword">this</span>.__,
        parsed_data = [],
        date_chart = __.x_scale == <span class="string">'time'</span> ? <span class="literal">true</span> : <span class="literal">false</span>,
        date_format = __.date_format,
        date_type = __.date_type,
        categoricalValue = __.categoricalValue;
    data.forEach( <span class="function"><span class="keyword">function</span> <span class="params">(dataset, index)</span> {</span>
      parsed_data.push(dataset.map(<span class="function"><span class="keyword">function</span><span class="params">(d, i)</span> {</span>
        <span class="keyword">var</span> x;</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>The time data is encoded in a string:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">if</span> (date_chart &amp;&amp; date_type == <span class="string">'string'</span>) {
          x = d3.time.format(date_format)
            .parse(categoricalValue.call(dataset, d));</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>The time data is encoded in an epoch number:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> <span class="keyword">if</span> (date_chart &amp;&amp; __.date_type == <span class="string">'epoch'</span>) {
          x = <span class="keyword">new</span> Date(categoricalValue.call(dataset, d) * <span class="number">1000</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Real categorical value:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="keyword">else</span> {
          x = __.categoricalValue.call(dataset, d);
        }
        <span class="keyword">return</span> [x, __.quantativeValue.call(dataset, d)];
      }));
    });
    <span class="keyword">if</span> (__.invert_data) {</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>parsed_data = data.reverse();  // TODO!!!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    }
    __.data = parsed_data;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.dataIdentifier = dataIdentifier;</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>this.delay = delay;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.normalizeData = normalizeData;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});
define(<span class="string">'mixins/layout'</span>, [
  <span class="string">"d3"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>TODO: unit test.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">setDimensions</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> __ = <span class="keyword">this</span>.__;
    <span class="keyword">if</span> ( __.width === <span class="literal">undefined</span> ) {
      __.width  = +<span class="keyword">this</span>.selection.style(<span class="string">'width'</span>).replace(<span class="string">'px'</span>, <span class="string">''</span>);
      __.height = __.height || __.width * __.ratio;
    } <span class="keyword">else</span> <span class="keyword">if</span> ( __.width &amp;&amp; __.height === <span class="literal">undefined</span>) {
      __.height = __.width * __.ratio;
    }
    setW();
    setH();
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">setW</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> __ = <span class="keyword">this</span>.__;
    __.w   = __.width - __.margin.right - __.margin.left;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };
      
  <span class="function"><span class="keyword">function</span> <span class="title">setH</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> __ = <span class="keyword">this</span>.__;
    __.h   = __.height - __.margin.top - __.margin.bottom;
    <span class="keyword">return</span> <span class="keyword">this</span>; 
  };

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.setDimensions = setDimensions;
    <span class="keyword">this</span>.setW = setW;
    <span class="keyword">this</span>.setH = setH;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});

define(<span class="string">'mixins/scale'</span>, [
  <span class="string">"d3"</span>,
  <span class="string">"utils/mixins"</span>,
], <span class="function"><span class="keyword">function</span> <span class="params">(d3, utils_mixins)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">_getRange</span> <span class="params">(axis, __)</span> {</span>
    <span class="keyword">if</span> ( axis == <span class="string">'x'</span>) {
      <span class="keyword">return</span> [<span class="number">0</span>, __.w];
    } <span class="keyword">else</span> <span class="keyword">if</span> ( axis == <span class="string">'y'</span>) {
      <span class="keyword">return</span> [__.h, <span class="number">0</span>];
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>It assumes the data is correctly sorted.
TODO: Guard against axis argument == null or undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_getDomain</span> <span class="params">(data, axis)</span> {</span>
    <span class="keyword">var</span> d0 = <span class="literal">Infinity</span>, 
        d1 = <span class="number">0</span>, 
        index = axis == <span class="string">'x'</span> ? <span class="number">0</span> : <span class="number">1</span>;
    data.forEach( <span class="function"><span class="keyword">function</span> <span class="params">(dataset, i)</span> {</span>
      <span class="keyword">if</span> (dataset[<span class="number">0</span>][index] &lt; d0) {
        d0 = dataset[<span class="number">0</span>][index];
      }
      <span class="keyword">if</span> (dataset[dataset.length - <span class="number">1</span>][index] &gt; d1) {
        d1 = dataset[dataset.length - <span class="number">1</span>][index];
      }
    });
    <span class="keyword">return</span> [d0, d1];
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_setScale</span> <span class="params">(scale_type)</span> {</span>
    <span class="keyword">switch</span> (scale_type) {
      <span class="keyword">case</span> <span class="literal">undefined</span>:
        <span class="keyword">return</span>;
      <span class="keyword">case</span> <span class="string">'ordinal'</span>:
        <span class="keyword">return</span> d3.scale.ordinal;
      <span class="keyword">case</span> <span class="string">'linear'</span>:
        <span class="keyword">return</span> d3.scale.linear;
      <span class="keyword">case</span> <span class="string">'time'</span>:
        <span class="keyword">return</span> d3.time.scale;
      <span class="keyword">default</span>:
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'scale_type `'</span>
          + scale_type
          + <span class="string">'` is not supported. Supported types are: ordinal, linear, time'</span> );
    }
  }

  <span class="function"><span class="keyword">function</span> <span class="title">setScales</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> __ = <span class="keyword">this</span>.__;
    __.xScale = <span class="keyword">this</span>._setScale(__.x_scale)();
    __.yScale = <span class="keyword">this</span>._setScale(__.y_scale)();
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>TODO: throw on wrong input</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_parseScaleBounds</span> <span class="params">(bounds, __)</span> {</span>
    <span class="keyword">var</span> min_max = getMinMaxValues(__.data);
    bounds = bounds.split(<span class="string">','</span>);
    <span class="keyword">if</span> (bounds[<span class="number">0</span>] == <span class="string">'min'</span>) { 
      bounds[<span class="number">0</span>] = min_max.min; 
    } <span class="keyword">else</span> {
      bounds[<span class="number">0</span>] = +bounds[<span class="number">0</span>];
    }
    <span class="keyword">if</span> (bounds[<span class="number">1</span>] == <span class="string">'max'</span>) {
      bounds[<span class="number">1</span>] = min_max.max; 
    } <span class="keyword">else</span> {
      bounds[<span class="number">1</span>] = +bounds[<span class="number">1</span>];
    }
    <span class="keyword">return</span> bounds;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Sets the range and domain for the linear scale.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_applyLinearScale</span> <span class="params">(range, __)</span> {</span>
    <span class="keyword">var</span> scale_bounds = __.scale_bounds,
        min_max = _parseScaleBounds(scale_bounds, __);  
    <span class="keyword">return</span> <span class="keyword">this</span>.range(range).domain(min_max);
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_applyTimeScale</span> <span class="params">(range, __)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>see <a href="http://bl.ocks.org/mbostock/6186172">bl.ocks.org/mbostock/6186172</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> data = __.data,
        domain = _getDomain(data, <span class="string">'x'</span>),
        t1 = domain[<span class="number">0</span>],
        t2 = domain[<span class="number">1</span>],
        offset = __.date_offset,
        t0,
        t3;
    <span class="keyword">if</span> (__.date_offset) {
      t0 = d3.time[offset].offset(t1, -<span class="number">1</span>);
      t3 = d3.time[offset].offset(t2, +<span class="number">1</span>);
      <span class="keyword">return</span> <span class="keyword">this</span>
        .domain([t0, t3])
        .range([t0, t3].map(d3.time.scale()
          .domain([t1, t2])
          .range([<span class="number">0</span>, __.w])));
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="keyword">this</span>.range(range).domain(domain);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Sets the range and domain for the ordinal scale.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="function"><span class="keyword">function</span> <span class="title">_applyOrdinalScale</span> <span class="params">(range, __)</span> {</span>
    <span class="keyword">var</span> data = __.x_axis_data || __.data;  <span class="comment">// FIXME this hack!</span>
    <span class="keyword">return</span> <span class="keyword">this</span>
      .rangeRoundBands(range, __.padding)
      .domain( __.data[<span class="number">0</span>].map( <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d[<span class="number">0</span>]; } ) );
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_applyScale</span> <span class="params">(axis, scale_type, __)</span> {</span>
    <span class="keyword">var</span> range = _getRange(axis, __);
    <span class="keyword">switch</span> (scale_type) {
      <span class="keyword">case</span> <span class="string">'ordinal'</span>:
        <span class="keyword">return</span> _applyOrdinalScale.call(<span class="keyword">this</span>, range, __);
      <span class="keyword">case</span> <span class="string">'linear'</span>:
        <span class="keyword">return</span> _applyLinearScale.call(<span class="keyword">this</span>, range, __);
      <span class="keyword">case</span> <span class="string">'time'</span>:
        <span class="keyword">return</span> _applyTimeScale.call(<span class="keyword">this</span>, range, __);
      <span class="keyword">case</span> <span class="literal">undefined</span>:
        <span class="keyword">return</span> <span class="keyword">new</span> Error(<span class="string">'scale cannot be undefined'</span>);
      <span class="keyword">default</span>:
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'scale_type '</span> 
                         + scale_type 
                         + <span class="string">' not supported. Is it misspelled?'</span> );
    }
  }

  <span class="function"><span class="keyword">function</span> <span class="title">applyScales</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.applyScale.call( __.xScale, <span class="string">'x'</span>, __.x_scale, __ );
    <span class="keyword">this</span>.applyScale.call( __.yScale, <span class="string">'y'</span>, __.y_scale, __ );
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>

    <span class="keyword">this</span>.setScales = setScales;
    <span class="keyword">this</span>.applyScales = applyScales;
    <span class="keyword">this</span>.applyScale = _applyScale;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>private methods, exposed for testing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>._setScale = _setScale;
    <span class="keyword">this</span>._applyLinearScale = _applyLinearScale;
    <span class="keyword">this</span>._getRange = _getRange;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});


define(<span class="string">'mixins/axis'</span>, [
  <span class="string">"d3"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">_setProps</span> <span class="params">(axis_conf, scale)</span> {</span> 
    <span class="keyword">if</span> ( !axis_conf.show ) { <span class="keyword">return</span>; }
    <span class="keyword">var</span> axis = d3.svg.axis().scale(scale);
    d3.entries(axis_conf).forEach(<span class="function"><span class="keyword">function</span><span class="params">(o)</span> {</span>
      <span class="keyword">if</span> ( o.value !== <span class="literal">undefined</span> &amp;&amp; o.key !== <span class="string">'show'</span> ) {
        axis[o.key](o.value);
      }
    });
    <span class="keyword">return</span> axis;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">setAxes</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> __ = <span class="keyword">this</span>.__;
    __.xAxis = <span class="keyword">this</span>._setProps(__.x_axis, __.xScale);
    __.yAxis = <span class="keyword">this</span>._setProps(__.y_axis, __.yScale);
    <span class="keyword">return</span> <span class="keyword">this</span>;
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionXAxisV</span> <span class="params">(__)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">this</span>
      .attr(<span class="string">"transform"</span>, <span class="string">"translate(0,"</span> + __.yScale.range()[<span class="number">0</span>] + <span class="string">")"</span>)
      .call(__.xAxis);
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionXAxisH</span> <span class="params">(__)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">this</span>
      .attr(<span class="string">"transform"</span>, <span class="string">"translate("</span> + <span class="number">10</span> + <span class="string">","</span> + __.h + <span class="string">")"</span>)
      .call(__.xAxis);
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionXAxis</span> <span class="params">(__)</span> {</span>
    <span class="keyword">if</span> ( !__.x_axis.show ) { <span class="keyword">return</span>; }
    __.quantitative_scale <span class="comment">//?????????????</span>
    <span class="keyword">if</span> (__.quantitative_scale == <span class="string">'y'</span>) {
      <span class="keyword">return</span> _transitionXAxisV.call(<span class="keyword">this</span>, __);
    } <span class="keyword">else</span> <span class="keyword">if</span> (__.quantitative_scale == <span class="string">'x'</span>) {
      <span class="keyword">return</span> _transitionXAxisH.call(<span class="keyword">this</span>, __);
    } <span class="keyword">else</span> {
      <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'quantitative_scale must be one of: x, y'</span>);
    } 
  }

  <span class="function"><span class="keyword">function</span> <span class="title">_transitionYAxis</span> <span class="params">(__)</span> {</span>
    <span class="keyword">if</span> ( !__.y_axis.show ) { <span class="keyword">return</span>; }
    <span class="keyword">return</span> <span class="keyword">this</span>.call(__.yAxis)
      .selectAll(<span class="string">"g"</span>)
      .delay( __.delay );
  }

  <span class="function"><span class="keyword">function</span> <span class="title">transitionAxis</span> <span class="params">(axis, __)</span> {</span>
    <span class="keyword">switch</span> (axis) {
      <span class="keyword">case</span> <span class="string">'x'</span>:
        <span class="keyword">return</span> _transitionXAxis.call(<span class="keyword">this</span>, __);
      <span class="keyword">case</span> <span class="string">'y'</span>:
        <span class="keyword">return</span> _transitionYAxis.call(<span class="keyword">this</span>, __);
      <span class="keyword">default</span>:
        <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">'axis must be one of: x, y. Not '</span> + axis );
    } 
  } 

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.setAxes = setAxes;
    <span class="keyword">this</span>._setProps = _setProps;
    <span class="keyword">this</span>.transitionAxis = transitionAxis;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});
define(<span class="string">'mixins/chart'</span>, [
  <span class="string">"d3"</span>
], <span class="function"><span class="keyword">function</span> <span class="params">(d3)</span> {</span>

  <span class="function"><span class="keyword">function</span> <span class="title">setChart</span> <span class="params">(chart_class)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>console.log(selection[0].tagName.toLowerCase())</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> self = <span class="keyword">this</span>,
        __   = self.__;</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Select the svg element, if it exists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.svg = self.selection.selectAll(<span class="string">"svg"</span>).data([__.data]);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Otherwise, create the skeletal chart.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.gEnter = self.svg.enter().append(<span class="string">"svg"</span>)
      .append(<span class="string">"g"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Initializing the tooltip.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> ( __.tooltip ) {
      self.tip = self.tip( __.tooltip );
      self.gEnter.call(self.tip);
    }
   
    self.gEnter.append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, chart_class);</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>TODO: we need to handle bar offsets and others?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    __.overlapping_charts.names.forEach( <span class="function"><span class="keyword">function</span> <span class="params">(chart_name)</span> {</span>
      self.gEnter.append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, chart_name);
    });

    self.gEnter.append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, <span class="string">"x axis"</span>);
    self.gEnter.append(<span class="string">"g"</span>).attr(<span class="string">"class"</span>, <span class="string">"y axis"</span>)
     .attr(<span class="string">"transform"</span>, <span class="string">"translate(-"</span> + (__.y_axis_offset) + <span class="string">",0)"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Update the outer dimensions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.svg.attr(<span class="string">"width"</span>, __.width)
      .attr(<span class="string">"height"</span>, __.height);</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Update the inner dimensions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.g = self.svg.select(<span class="string">"g"</span>)
      .attr(<span class="string">"transform"</span>, <span class="string">"translate("</span> + 
      __.margin.left + <span class="string">","</span> + __.margin.top + <span class="string">")"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Transitions root.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.transition = self.g.transition().duration(__.duration);</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Update the y axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.transitionAxis.call(
      self.transition.selectAll(<span class="string">'.y.axis'</span>), <span class="string">'y'</span>, __);</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Update the x axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self.transitionAxis.call(
      self.transition.selectAll(<span class="string">'.x.axis'</span>), <span class="string">'x'</span>, __);

    <span class="keyword">return</span> self;
  };

  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.setChart = setChart;
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

});</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p><strong>The default configuration module for the bar.bar module</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'bar/config'</span>, [
  <span class="string">"base_config"</span>,
  <span class="string">"utils/mixins"</span>,
], <span class="function"><span class="keyword">function</span><span class="params">(base_config, utils_mixins)</span> {</span>
    
  <span class="keyword">var</span> config = {
        orientation: <span class="string">'vertical'</span>,
        padding: <span class="number">.1</span>,    
        barOffSet: <span class="number">4</span>,
      },
      utils = utils_mixins();

  <span class="keyword">return</span> utils.extend(base_config, config);
  
});</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p><strong>The bar.bar module</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define(<span class="string">'bar/bar'</span>,[
  <span class="string">"d3"</span>, 
  <span class="string">"utils/mixins"</span>,
  <span class="string">"bar/config"</span>, 
  <span class="string">"mixins/data"</span>,
  <span class="string">"mixins/layout"</span>,
  <span class="string">"mixins/scale"</span>,
  <span class="string">"mixins/axis"</span>,
  <span class="string">"mixins/chart"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p> &quot;bar/bar_helpers&quot;,
 &quot;bar/scaffolding&quot;,
 &quot;line/scaffolding&quot;,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>], <span class="function"><span class="keyword">function</span><span class="params">(
  d3, 
  utils_mixins, 
  default_config, 
  data_mixins,
  layout_mixins,
  scale_mixins,
  axis_mixins,
  chart_mixins</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p> bar_helpers,
 bar_scaffolding,
 line_scaffolding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>) {
  
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(user_config)</span> {</span>

    <span class="keyword">var</span> config = user_config || {},
        utils  = utils_mixins()
        extend = utils.extend,
        getset = utils.getset,
        __     = extend(default_config, config);

    <span class="function"><span class="keyword">function</span> <span class="title">Bar</span> <span class="params">(selection)</span> {</span>

      <span class="keyword">var</span> self = <span class="keyword">this</span> <span class="keyword">instanceof</span> Bar
               ? <span class="keyword">this</span>
               : <span class="keyword">new</span> Bar(selection),
          has_timescale = __.x_scale == <span class="string">'time'</span>,
          bars;

      self.__        = __;
      self.selection = selection;

      self.normalizeData();
      self.setDimensions();

      <span class="keyword">if</span> (has_timescale) {</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <pre><code>   __.bar_width = (__.w() / data[0].length) * .9;
   __.y_axis_offset = __.y_axis_offset == 0 ? __.bar_width * .6 : __.y_axis_offset;
   //TODO: set events?
   __.margin = utils.extend(__.margin, {
       left: __.margin.left + __.y_axis_offset,
       right: __.margin.right + __.y_axis_offset
   });</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>      }

      self.setScales();
      self.setAxes();

      __.delay = <span class="function"><span class="keyword">function</span> <span class="params">(d, i)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Attention, delay can not be longer of transition time! Test!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="keyword">return</span> i / __.data.length * __.duration;
      }

      self.applyScales();
      self.setChart(<span class="string">'bars'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <pre><code> self.chartScaffolding.call(self, selection, __, &#39;bars&#39;);
 //self.barScaffolding.call(self, __);

 __.overlapping_charts.names.forEach( function (chart_name) {
   utils.getScaffoldingMethod.call(self, chart_name).call(self, __);
 });</code></pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">return</span> selection;
    }

    getset(Bar, __);
    utils_mixins.call(Bar.prototype);
    data_mixins.call(Bar.prototype);
    layout_mixins.call(Bar.prototype);
    scale_mixins.call(Bar.prototype);
    axis_mixins.call(Bar.prototype);
    chart_mixins.call(Bar.prototype);</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>bar_helpers.call(Bar.prototype);
bar_scaffolding.call(Bar.prototype);
line_scaffolding.call(Bar.prototype);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">return</span> Bar;
  }

});


define(<span class="string">'chart'</span>,[
  <span class="string">"d3"</span>, 
  <span class="string">"d3_tip"</span>,
  <span class="string">"draw"</span>,
  <span class="string">"base_config"</span>,
  <span class="string">"utils/mixins"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>//&quot;utils/mixins&quot;,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="string">"mixins/data"</span>,
  <span class="string">"mixins/layout"</span>,
  <span class="string">"mixins/scale"</span>,
  <span class="string">"mixins/axis"</span>,
  <span class="string">"mixins/chart"</span>,
  <span class="string">"bar/config"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>&quot;bar/bar_helpers&quot;, 
&quot;bar/scaffolding&quot;,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="string">"bar/bar"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>&quot;line/config&quot;,
&quot;line/scaffolding&quot;,
&quot;line/line&quot;,
&quot;circle/config&quot;,
&quot;circle/scaffolding&quot;,
&quot;circle/circle&quot;,
&quot;frame/states&quot;,
&quot;frame/state_machine&quot;,
&quot;frame/frame&quot;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>], <span class="function"><span class="keyword">function</span><span class="params">(
  d3, 
  d3_tip,
  draw, 
  base_config, 
  utils_mixins,</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>//utils_mixins, </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  data_mixins, 
  layout_mixins, 
  scale_mixins,
  axis_mixins,
  chart_mixins,
  bar_config,</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>bar_helpers,
bar_scaffolding,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Bar</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>line_config,
line_scaffolding,
Line,
circle_config,
circle_scaffolding,
Circle
states, 
StateMachine, 
Frame</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>) {

  d3.d3_tip = d3_tip;

  <span class="keyword">return</span> {
    d3: d3,
    draw: draw,
    base_config: base_config,
    utils_mixins: utils_mixins,</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>//utils_mixins: utils_mixins,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    data_mixins: data_mixins,
    layout_mixins: layout_mixins,
    scale_mixins: scale_mixins,
    axis_mixins: axis_mixins,
    chart_mixins: chart_mixins,
    bar_config: bar_config,</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>bar_helpers: bar_helpers,
bar_scaffolding: bar_scaffolding,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Bar: Bar</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>line_config: line_config,
line_scaffolding: line_scaffolding,
Line: Line,
circle_config: circle_config,
circle_scaffolding: circle_scaffolding,
Circle: Circle,
Frame: Frame,
states: states, 
StateMachine: StateMachine,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  };

});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
